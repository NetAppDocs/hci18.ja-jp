---
sidebar: sidebar 
permalink: docs/task_mnode_manage_storage_cluster_assets.html 
summary: REST API UI を使用して、管理ノードのストレージクラスタアセットを追加、削除、および変更できます。 
keywords: netapp, mnode, management node, rest api, hci, assets 
---
= ストレージクラスタアセットを作成および管理する
:allow-uri-read: 


[role="lead"]
新しいストレージクラスタアセットを管理ノードに追加したり、既知のストレージクラスタアセット用に格納されているクレデンシャルを編集したり、 REST API を使用して管理ノードからストレージクラスタアセットを削除したりできます。

.必要なもの
* ストレージクラスタで NetApp Element ソフトウェア 11.3 以降を実行していることを確認します。
* バージョン 11.3 以降を実行する管理ノードを導入しておきます。


.ストレージクラスタのアセット管理オプション
次のいずれかのオプションを選択します。

* <<ストレージのインストール ID とクラスタ ID を取得します クラスタアセット>>
* <<新しいストレージクラスタアセットを追加します>>
* <<ストレージクラスタアセットに保存されているクレデンシャルを編集します>>
* <<ストレージクラスタアセットを削除します>>




== ストレージのインストール ID とクラスタ ID を取得します クラスタアセット

REST API のインストール ID およびストレージクラスタの ID を取得できます。インストール ID は、新しいストレージクラスタアセットを追加する場合に必要になります。クラスタ ID は、特定のストレージクラスタアセットを変更または削除する場合に必要になります。

.手順
. 管理ノードのIPアドレスに続けて次のように入力し、インベントリサービスのREST API UIにアクセスし `/inventory/1/`ます。
+
[listing]
----
https://<ManagementNodeIP>/inventory/1/
----
. 「 * Authorize * （認証）」または任意のロックアイコンを選択し、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアントIDにと入力し `mnode-client`ます。
.. セッションを開始するには、 * Authorize * を選択します。
.. ウィンドウを閉じます。


. [*Get/Installations] を選択します。
. [* 試してみてください * ] を選択します。
. [* Execute] を選択します。
+
API は、既知のすべてのインストールのリストを返します。

. コード200応答本文から、インストールのリストにあるフィールドに値を保存します `id`。これはインストール ID です。例：
+
[listing, subs="+quotes"]
----
"installations": [
    {
      *"id": "1234a678-12ab-35dc-7b4a-1234a5b6a7ba",*
      "name": "my-hci-installation",
      "_links": {
        "collection": "https://localhost/inventory/1/installations",
        "self": "https://localhost/inventory/1/installations/1234a678-12ab-35dc-7b4a-1234a5b6a7ba"
      }
    }
  ]
----
. 管理ノードのIPアドレスに続けて次のように入力して、ストレージサービスのREST API UIにアクセスし `/storage/1/`ます。
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. 「 * Authorize * （認証）」または任意のロックアイコンを選択し、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアントIDにと入力し `mnode-client`ます。
.. セッションを開始するには、 * Authorize * を選択します。
.. ウィンドウを閉じます。


. 「 * get/clusters * 」を選択します。
. [* 試してみてください * ] を選択します。
. 前の手順で保存したインストールIDをパラメータに入力し `installationId`ます。
. [* Execute] を選択します。
+
API は、このインストール環境内のすべての既知のストレージクラスタのリストを返します。

. コード200の応答本文で、正しいストレージクラスタを探し、その値をクラスタのフィールドに保存します `storageId`。これはストレージクラスタの ID です。




== 新しいストレージクラスタアセットを追加します

REST API を使用して、管理ノードインベントリに新しいストレージクラスタアセットを追加できます。新しいストレージクラスタアセットを追加すると、そのアセットが管理ノードに自動的に登録されます。

.必要なもの
* 追加するストレージクラスタのをコピーしておき<<ストレージのインストール ID とクラスタ ID を取得します クラスタアセット,ストレージクラスタ ID とインストール ID>>ます。
* 複数のストレージノードを追加する場合は、および複数のストレージクラスタのサポートの制限事項を確認し、理解しておくlink:concept_hci_clusters.html#authoritative-storage-clusters["権限のあるクラスタです"]必要があります。
+

NOTE: 信頼できるクラスタで定義されたすべてのユーザが、 Hybrid Cloud Control インスタンスに関連付けられている他のすべてのクラスタのユーザとして定義されています。



.手順
. 管理ノードのIPアドレスに続けて次のように入力して、ストレージサービスのREST API UIにアクセスし `/storage/1/`ます。
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. 「 * Authorize * （認証）」または任意のロックアイコンを選択し、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアントIDにと入力し `mnode-client`ます。
.. セッションを開始するには、 * Authorize * を選択します。
.. ウィンドウを閉じます。


. [* POST/clusters] を選択します。
. [* 試してみてください * ] を選択します。
. 「 Request body 」フィールドに、次のパラメータで新しいストレージクラスタの情報を入力します。
+
[listing]
----
{
  "installationId": "a1b2c34d-e56f-1a2b-c123-1ab2cd345d6e",
  "mvip": "10.0.0.1",
  "password": "admin",
  "userId": "admin"
}
----
+
|===
| パラメータ | タイプ | 製品説明 


| `installationId` | 文字列 | 新しいストレージクラスタを追加するインストール。以前に保存したインストール ID をこのパラメータに入力します。 


| `mvip` | 文字列 | ストレージクラスタの IPv4 管理仮想 IP アドレス（ MVIP ）。 


| `password` | 文字列 | ストレージクラスタとの通信に使用するパスワード。 


| `userId` | 文字列 | ストレージクラスタとの通信に使用するユーザ ID （ユーザには管理者権限が必要）。 
|===
. [* Execute] を選択します。
+
API は、新しく追加したストレージクラスタアセットの名前、バージョン、 IP アドレスなどの情報を含むオブジェクトを返します。





== ストレージクラスタアセットに保存されているクレデンシャルを編集します

管理ノードがストレージクラスタへのログインに使用する、保存されているクレデンシャルを編集できます。選択するユーザにはクラスタ管理者アクセスが必要です。


NOTE: 続行する前に、の手順を実行していることを確認して<<ストレージのインストール ID とクラスタ ID を取得します クラスタアセット>>ください。

.手順
. 管理ノードのIPアドレスに続けて次のように入力して、ストレージサービスのREST API UIにアクセスし `/storage/1/`ます。
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. 「 * Authorize * （認証）」または任意のロックアイコンを選択し、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアントIDにと入力し `mnode-client`ます。
.. セッションを開始するには、 * Authorize * を選択します。
.. ウィンドウを閉じます。


. PUT /clusters/｛ storageId ｝ * を選択します。
. [* 試してみてください * ] を選択します。
. 前の手順でコピーしたストレージクラスタIDをパラメータに貼り付け `storageId`ます。
. [*Request body*] フィールドで、次のパラメータの一方または両方を変更します。
+
[listing]
----
{
  "password": "adminadmin",
  "userId": "admin"
}
----
+
|===
| パラメータ | タイプ | 製品説明 


| `password` | 文字列 | ストレージクラスタとの通信に使用するパスワード。 


| `userId` | 文字列 | ストレージクラスタとの通信に使用するユーザ ID （ユーザには管理者権限が必要）。 
|===
. [* Execute] を選択します。




== ストレージクラスタアセットを削除します

ストレージクラスタが使用停止になっている場合は、ストレージクラスタアセットを削除できます。ストレージクラスタのアセットを削除すると、管理ノードから自動的に登録解除されます。


NOTE: 続行する前に、の手順を実行していることを確認して<<ストレージのインストール ID とクラスタ ID を取得します クラスタアセット>>ください。

.手順
. 管理ノードのIPアドレスに続けて次のように入力して、ストレージサービスのREST API UIにアクセスし `/storage/1/`ます。
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. 「 * Authorize * （認証）」または任意のロックアイコンを選択し、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアントIDにと入力し `mnode-client`ます。
.. セッションを開始するには、 * Authorize * を選択します。
.. ウィンドウを閉じます。


. DELETE /clusters/｛ storageId ｝ * を選択します。
. [* 試してみてください * ] を選択します。
. 前の手順でパラメータでコピーしたストレージクラスタIDを入力し `storageId`ます。
. [* Execute] を選択します。
+
成功すると、 API は空の応答を返します。



[discrete]
== 詳細情報

* link:concept_hci_clusters.html#authoritative-storage-clusters["権限のあるクラスタです"]
* https://docs.netapp.com/us-en/vcp/index.html["vCenter Server 向け NetApp Element プラグイン"^]
* https://www.netapp.com/hybrid-cloud/hci-documentation/["NetApp HCI のリソースページ"^]

